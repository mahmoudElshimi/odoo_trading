<odoo>
    <record id="view_trade_list" model="ir.ui.view">
        <field name="name">rusetta.trade.list</field>
        <field name="model">rusetta.trade</field>
        <field name="arch" type="xml">
            <list>
                <field name="create_date"/>
                <field name="opt_type"/>
                <field name="entry_price"/>
                <field name="take_profit"/>
                <field name="stop_loss"/>
                <field name="current_profit"/>
                <field name="final_profit"/>
                <field name="state"/>
            </list>
        </field>
    </record>

    <record id="view_trade_form" model="ir.ui.view">
        <field name="name">rusetta.trade.form</field>
        <field name="model">rusetta.trade</field>
        <field name="arch" type="xml">
            <form string="Trade">
                <sheet>
		   <header>
			    <button name="action_run"
				    string="Run"
				    type="object"
				    class="btn-primary"
				    invisible="state != 'draft'"/>


				<button name="%(action_confirmation_wizard)d"
					type="action"
					string="Close"
					class="btn-primary"
					invisible="state != 'running'"/>

				    <button name="action_cancel"
					    string="Cancel"
					    type="object"
					    class="btn-primary"
					    invisible="state == 'draft'"/>

			    <field name="state" widget="statusbar" statusbar_visible="draft,running,closed"/>

                    </header>

			<div class="oe_title">
				<label for="create_date"/>
				<h1>
					<field name="create_date"/>
				</h1>
			</div>
		<group>
                    <group string="Your Trade Data">
                        <field name="opt_type"/>
                        <field name="entry_price"/>
                        <field name="lot_size"/>
                        <field name="profit"/>
                        <field name="loss"/>
                        <field name="take_profit"/>
                        <field name="stop_loss"/>
                    </group>
		    <group string="Market Data">
			    <button name="action_update_values"
				    string="Update Market Data"
				    type="object"
				    class="btn-primary"/>
			    <field name="bid"/>
			    <field name="ask"/>
			    <field name="open_"/>
			    <field name="low"/>
			    <field name="high"/>
			    <field name="change"/>
			    <field name="api_time"/>
			    <field name="current_profit"/>
		    </group>
	    </group>
                    <group string="State Data">
                        <field name="state" readonly="1"/>
                        <field name="start_time" readonly="1"/>
                        <field name="close_time" readonly="1"/>
                        <field name="close_price" invisible="('state','!=','running')"/>
                        <field name="final_profit" readonly="1"/>
                    </group>
		    <group string="Charts">
	     <div class="oe_chatter"></div>
                <div style="width:100%; height:500px;">
                    <div class="tradingview-widget-container" style="height:100%;">
                        <div class="tradingview-widget-container__widget"></div>
                        <div class="tradingview-widget-copyright">
                            <a href="https://www.tradingview.com/symbols/FX-EURUSD/?exchange=FX"
                               rel="noopener nofollow" target="_blank">
                               <span class="blue-text">EURUSD chart by TradingView</span>
                            </a>
                        </div>
                        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async="async">
                        {
                          "symbol": "FX:EURUSD",
                          "chartOnly": false,
                          "dateRange": "1D",
                          "noTimeScale": false,
                          "colorTheme": "light",
                          "isTransparent": true,
                          "locale": "en",
                          "width": "100%",
                          "autosize": true,
                          "height": "100%"
                        }
                        </script>
                    </div>
	    </div>
    </group>
                </sheet>
		<chatter/>
            </form>
        </field>
    </record>

    <record id="action_trade" model="ir.actions.act_window">
        <field name="name">Trades</field>
        <field name="res_model">rusetta.trade</field>
        <field name="view_mode">list,form</field>
    </record>
</odoo>

